{% extends "base_template.html" %}
{% block title %}Generate Invitation{% endblock %}
{% block style %}<style></style>{% endblock %}
{% block content %}
    <h1>Generate Invitation Link</h1>
    {% if error is not None %}<p style="color: red">{{ error }}</p>{% endif %}
    <form method="post" action="{% url 'generate-user-invitation' %}">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Generate</button>
    </form>
    {% if link is not None %}
        <p id="invitationLink">{{ link }}</p>
        <button onclick="copyLink()">Copy Link</button>
        <script>
            function copyLink() {
                var linkText =
                    document.getElementById("invitationLink").textContent;
                navigator.clipboard.writeText(linkText).then(
                    function () {
                        alert("Link copied to clipboard!");
                    },
                    function (err) {
                        alert("Could not copy text: ", err);
                    },
                );
            }
        </script>
    {% endif %}
{% endblock %}
